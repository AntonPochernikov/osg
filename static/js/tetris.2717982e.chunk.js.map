{"version":3,"sources":["../node_modules/classnames/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","modules/common/components/GameButton/index.jsx","modules/common/components/ArrowKeys/index.jsx","modules/common/components/KeyboardKey/index.jsx","modules/tetris/containers/Grid.js","modules/tetris/components/Grid.jsx","modules/tetris/components/NextFigureGrid.jsx","modules/tetris/components/Settings.jsx","modules/tetris/components/Stats.jsx","modules/tetris/containers/Stats.js","modules/tetris/components/Info.jsx","modules/tetris/containers/Root.js","modules/tetris/components/Root.jsx"],"names":["hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","key","call","join","module","exports","default","_objectWithoutProperties","source","excluded","target","sourceKeys","Object","keys","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","GameButton","children","className","btnProps","cn","ArrowKeys","aria-label","KeyboardKey","name","connect","state","grid","select","getGridCells","gameState","getGameState","actionCreators","map","tr","cellState","y","cellClass","NextFigureGrid","config","speed","min","max","Settings","score","canAdjustSpeed","incSpeed","decSpeed","handleDecSpeedBtn","useCallback","handleIncSpeedBtn","onClick","disabled","Stats","nextFigureGrid","actions","buttonByState","initial","title","action","startGame","started","stopGame","paused","finished","handleGameButton","e","blur","increaseGameSpeed","decreaseGameSpeed","defaultProps","nextFigurePreview","getSpeed","getScore","Info","pauseGame","resumeGame","tryFigureLeft","tryFigureRight","tryFigureDown","tryRotateFigure","game","useRef","current","useEffect","keydownListener","keyCode","document","addEventListener","removeEventListener","Header","canHome"],"mappings":"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","file":"static/js/tetris.2717982e.chunk.js","sourcesContent":["/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n\n/* global define */\n(function () {\n  'use strict';\n\n  var hasOwn = {}.hasOwnProperty;\n\n  function classNames() {\n    var classes = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      var arg = arguments[i];\n      if (!arg) continue;\n      var argType = typeof arg;\n\n      if (argType === 'string' || argType === 'number') {\n        classes.push(arg);\n      } else if (Array.isArray(arg) && arg.length) {\n        var inner = classNames.apply(null, arg);\n\n        if (inner) {\n          classes.push(inner);\n        }\n      } else if (argType === 'object') {\n        for (var key in arg) {\n          if (hasOwn.call(arg, key) && arg[key]) {\n            classes.push(key);\n          }\n        }\n      }\n    }\n\n    return classes.join(' ');\n  }\n\n  if (typeof module !== 'undefined' && module.exports) {\n    classNames.default = classNames;\n    module.exports = classNames;\n  } else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n    // register as 'classnames', consistent with npm package name\n    define('classnames', [], function () {\n      return classNames;\n    });\n  } else {\n    window.classNames = classNames;\n  }\n})();","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport './styles.css';\n\nexport default function GameButton({ children = null, className = '', ...btnProps }) {\n  return (\n    <button className={cn('game-button', className)} {...btnProps}>\n      {children}\n    </button>\n  );\n}\n\nGameButton.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n};\n","import React from 'react';\nimport './styles.css';\n\nexport default function ArrowKeys() {\n  return (\n    <div className=\"arrow-keys\" aria-label=\"keyboard arrows\">\n      <kbd className=\"arrow-key arrow-key--top\" />\n      <div className=\"arrow-keys__bottom-layout\">\n        <kbd className=\"arrow-key arrow-key--left\" />\n        <kbd className=\"arrow-key arrow-key--down\" />\n        <kbd className=\"arrow-key arrow-key--right\" />\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport './styles.css';\n\nexport default function KeyboardKey({ className = '', name }) {\n  return <kbd className={cn('keyboard-key', className)}>[{name}]</kbd>\n}\n\nKeyboardKey.propTypes = {\n  className: PropTypes.string,\n  name: PropTypes.string.isRequired,\n};\n","import { connect } from 'react-redux';\nimport * as actionCreators from 'modules/main/actions';\nimport * as select from 'modules/main/selectors';\nimport Grid from '../components/Grid';\n\nconst mapStateToProps = state => ({\n  grid: select.tetris.getGridCells(state),\n  gameState: select.tetris.getGameState(state),\n});\n\nexport default connect(mapStateToProps, actionCreators.tetris)(Grid);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport cellStates from 'constants/possibleCellStates';\nimport './Grid.css';\n\nexport default function Grid({ grid = [], gameState = 'initial' }) {\n  return (\n    <div className=\"tetris-grid-container\">\n      <table className=\"tetris-grid\">\n        <tbody className=\"tetris-grid__body\">\n          {grid.map((tr, i) => (\n            <tr className=\"tetris-grid__row\" key={i}>\n              {tr.map((cellState, y) => {\n                const cellClass = cn(\n                  'tetris-grid__cell',\n                  `tetris-grid__cell--${cellState}`,\n                );\n                return <td className={cellClass} key={y} />;\n              })}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n      {gameState === 'paused' && (\n        <div className=\"tetris-grid-container__paused-overlay\" />\n      )}\n    </div>\n  );\n}\n\nGrid.propTypes = {\n  grid: PropTypes.arrayOf(\n    PropTypes.arrayOf(\n      PropTypes.oneOf(cellStates).isRequired,\n    ),\n  ).isRequired,\n  gameState: PropTypes.oneOf(['initial', 'started', 'paused', 'finished']).isRequired,\n};\n","import React from 'react';\nimport cn from 'classnames';\nimport './NextFigureGrid.css';\n\nexport default function NextFigureGrid ({ grid }) {\n  return (\n    <div className=\"tetris-stats__next-figure\">\n      <table className=\"next-figure-grid\">\n        {grid.length > 0 && <caption className=\"next-figure-grid__caption\">Next Figure</caption>}\n        <tbody className=\"next-figure-grid__body\">\n          {grid.map((tr, i) => (\n            <tr className=\"next-figure-grid__row\" key={i}>\n              {tr.map((cellState, y) => {\n                const cellClass = cn(\n                  'next-figure-grid__cell',\n                  `next-figure-grid__cell--${cellState}`,\n                );\n                return <td className={cellClass} key={y} />;\n              })}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","import React, { useCallback } from 'react';\nimport config from '../constants/config';\nimport './Settings.css';\n\nconst { speed: { min, max } } = config;\n\nexport default function Settings({\n  speed,\n  score,\n  canAdjustSpeed,\n  incSpeed,\n  decSpeed,\n}) {\n  const handleDecSpeedBtn = useCallback(\n    () => {\n      decSpeed();\n    },\n    [decSpeed],\n  );\n  const handleIncSpeedBtn = useCallback(\n    () => {\n      incSpeed();\n    },\n    [incSpeed],\n  );\n\n  return (\n    <div className=\"tetris-stats__settings\">\n      <div className=\"tetris-stats__speed\">\n        {canAdjustSpeed && (\n          <button\n            className=\"tetris-stats__speed-btn tetris-stats__speed-btn--dec\"\n            onClick={handleDecSpeedBtn}\n            disabled={speed === min}\n          />)}\n        <p className=\"tetris-stats__speed-value\">Speed: {speed}</p>\n        {canAdjustSpeed && (\n          <button\n            className=\"tetris-stats__speed-btn tetris-stats__speed-btn--inc\"\n            onClick={handleIncSpeedBtn}\n            disabled={speed === max}\n          />)}\n      </div>\n      <div className=\"tetris-stats__score\">\n        <p className=\"tetris-stats__score-value\">Score: {score}</p>\n      </div>\n    </div>\n  );\n};\n","import React, { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport NextFigureGrid from './NextFigureGrid';\nimport Settings from './Settings';\nimport GameButton from 'modules/common/components/GameButton';\nimport './Stats.css';\n\nexport default function Stats({\n  score,\n  speed,\n  gameState,\n  canAdjustSpeed,\n  nextFigureGrid,\n  ...actions\n}) {\n  const buttonByState = {\n    initial: {\n      title: 'Start New Game',\n      action: actions.startGame,\n    },\n    started: {\n      title: 'Stop Game',\n      action: actions.stopGame,\n    },\n    paused: {\n      title: 'Stop Game',\n      action: actions.stopGame,\n    },\n    finished: {\n      title: 'Start New Game',\n      action: actions.startGame,\n    },\n  };\n\n  const getButtonTitle = () => buttonByState[gameState].title;\n\n  const handleGameButton = useCallback(\n    (e) => {\n      // blur focus to use [space] in game\n      e.target.blur();\n      buttonByState[gameState].action()\n    },\n    [gameState, buttonByState],\n  );\n\n  return (\n    <div className=\"tetris-stats\">\n      <h2 className=\"tetris-stats__title\">Game Stats</h2>\n      <NextFigureGrid grid={nextFigureGrid} />\n\n      <Settings\n        speed={speed}\n        score={score}\n        incSpeed={actions.increaseGameSpeed}\n        decSpeed={actions.decreaseGameSpeed}\n        canAdjustSpeed={canAdjustSpeed}\n      />\n\n      <GameButton onClick={handleGameButton}>\n        {getButtonTitle()}\n      </GameButton>\n    </div>\n  );\n};\n\nStats.propTypes = {\n  gameState: PropTypes.oneOf(['initial', 'started', 'paused', 'finished']).isRequired,\n  speed: PropTypes.number.isRequired,\n  score: PropTypes.number.isRequired,\n  nextFigurePreview: PropTypes.array.isRequired,\n  canAdjustSpeed: PropTypes.bool.isRequired,\n};\n\nStats.defaultProps = {\n  gameState: 'initial',\n  speed: 1,\n  score: 0,\n  nextFigurePreview: [],\n  canAdjustSpeed: true,\n};\n","import { connect } from 'react-redux';\nimport * as actionCreators from 'modules/main/actions';\nimport * as select from 'modules/main/selectors';\nimport Stats from '../components/Stats';\n\nconst mapStateToProps = state => ({\n  gameState: select.tetris.getGameState(state),\n  speed: select.tetris.getSpeed(state),\n  score: select.tetris.getScore(state),\n  nextFigureGrid: select.tetris.nextFigureGrid(state),\n  canAdjustSpeed: select.tetris.canAdjustSpeed(state),\n});\n\nexport default connect(mapStateToProps, actionCreators.tetris)(Stats);\n","import React from 'react';\nimport ArrowKeys from 'modules/common/components/ArrowKeys';\nimport KeyboardKey from 'modules/common/components/KeyboardKey';\nimport './Info.css';\n\nexport default function Info() {\n  return (\n    <div className=\"tetris-info\">\n      <h2 className=\"tetris-info__title\">Game info</h2>\n\n      <div className=\"tetris-info__paragraph\">\n        <span className=\"tetris-info__phrase\">Use</span>\n        <ArrowKeys />\n        <span className=\"tetris-info__phrase\">to move figure</span>\n      </div>\n\n      <div className=\"tetris-info__paragraph\">\n        <span className=\"tetris-info__phrase\">Press</span>\n        <KeyboardKey name=\"Space\" className=\"tetris-info__info-key\" />\n        <span className=\"tetris-info__phrase\">to rotate figure</span>\n      </div>\n\n      <div className=\"tetris-info__paragraph\">\n        <span className=\"tetris-info__phrase\">Press</span>\n        <KeyboardKey name=\"Shift\" className=\"tetris-info__info-key\" />\n        <span className=\"tetris-info__phrase\">to pause/unpause game</span>\n      </div>\n    </div>\n  );\n}\n","import { connect } from 'react-redux';\nimport * as actionCreators from 'modules/main/actions';\nimport * as select from 'modules/main/selectors';\nimport Root from '../components/Root';\n\nconst mapStateToProps = state => ({\n  gameState: select.tetris.getGameState(state),\n});\n\nexport default connect(mapStateToProps, actionCreators.tetris)(Root);\n","import React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport Header from 'modules/common/components/Header';\nimport Grid from '../containers/Grid';\nimport Stats from '../containers/Stats';\nimport Info from './Info';\nimport './Root.css';\n\nexport default function Root({\n  gameState = 'initial',\n  pauseGame,\n  resumeGame,\n  tryFigureLeft,\n  tryFigureRight,\n  tryFigureDown,\n  tryRotateFigure,\n}) {\n  // use \"refed\" game state for key listener\n  const game = useRef(gameState);\n  game.current = gameState;\n\n  useEffect(() => {\n    const keydownListener = (e) => {\n      if (gameState !== 'started' && gameState !== 'paused') {\n        return;\n      }\n\n      switch (e.keyCode) {\n        // shift\n        case 16: {\n          if (gameState === 'started') {\n            pauseGame();\n            break;\n          }\n          if (gameState === 'paused') {\n            resumeGame();\n          }\n          break;\n        }\n        // arrow left\n        case 37: {\n          if (gameState === 'started') {\n            tryFigureLeft();\n          }\n          break;\n        }\n        // arrow right\n        case 39: {\n          if (gameState === 'started') {\n            tryFigureRight();\n          }\n          break;\n        }\n        // arrow down\n        case 40: {\n          if (gameState === 'started') {\n            tryFigureDown();\n          }\n          break;\n        }\n        // space\n        case 32: {\n          if (gameState === 'started') {\n            tryRotateFigure();\n          }\n          break;\n        }\n        default: break;\n      }\n    };\n    document.addEventListener('keydown', keydownListener);\n    return () => {\n      document.removeEventListener('keydown', keydownListener);\n    };\n  }, [\n    gameState,\n    pauseGame,\n    resumeGame,\n    tryFigureDown,\n    tryFigureLeft,\n    tryFigureRight,\n    tryRotateFigure,\n  ]);\n\n  // pause game when unmounting\n  useEffect(() => () => {\n    if (game.current === 'started') {\n      pauseGame();\n    }\n  }, [pauseGame]);\n\n  return (\n    <div className=\"main-container\">\n      <Header title=\"Tetris\" canHome />\n      <main className=\"tetris-body\">\n        <Info />\n        <Grid />\n        <Stats />\n      </main>\n    </div>\n  );\n};\n\nRoot.propTypes = {\n  gameState: PropTypes.oneOf(['initial', 'started', 'paused', 'finished']).isRequired,\n};\n"],"sourceRoot":""}